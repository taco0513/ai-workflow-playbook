# 🎯 요청 분류 가이드

> AI가 사용자 요청을 자동으로 분류하여 로드맵 이탈을 방지하는 상세 가이드

## 🧠 분류 알고리즘

### 1단계: 키워드 분석
```yaml
메인_로드맵_키워드:
  - "현재 작업에", "이것도 추가", "함께", "통합"
  - "더 좋게", "개선", "강화", "완성도"
  - 현재 작업과 관련된 기술/도메인 키워드

사이드_퀘스트_키워드:
  - "새로운", "다른", "또 다른", "아니면"
  - "~도 만들어", "~도 해보자", "~는 어때"
  - 완전히 다른 도메인/기술 키워드

긴급_수정_키워드:
  - "버그", "에러", "문제", "작동 안함"
  - "보안", "취약점", "위험", "긴급"
  - "빠뜨린", "놓친", "빼먹은"
```

### 2단계: 컨텍스트 분석
```python
def analyze_context(request, current_roadmap):
    # 현재 로드맵과의 관련성 점수 (0-100)
    relevance_score = calculate_relevance(request, current_roadmap)
    
    # 시너지 효과 분석
    synergy_score = analyze_synergy(request, current_work)
    
    # 복잡도 및 시간 추정
    complexity = estimate_complexity(request)
    
    # 의존성 분석
    dependencies = find_dependencies(request, current_roadmap)
    
    return classify_request(relevance_score, synergy_score, complexity, dependencies)
```

## 📊 4가지 분류 상세

### 🎯 메인 로드맵 (즉시 진행)

**조건**:
- 현재 작업과 관련성 ≥ 80%
- 시너지 효과 ≥ 70%
- 로드맵 진행에 도움이 됨

**예시**:
```
현재: "MVP 레시피책 작성 중"
요청: "레시피에 AI 도구 활용법도 추가해줘"
분석: 관련성 95%, 시너지 90% → 메인 로드맵 ✅
```

**응답 패턴**:
```
✅ **즉시 진행합니다!**
이 요청은 현재 작업과 완벽하게 연결되어 
전체 품질을 크게 향상시킬 것 같아요.
```

### 📈 로드맵 확장 (적극 수용)

**조건**:
- 현재 작업과 관련성 50-79%
- 메인 목표 달성에 도움
- 추가 가치가 명확함

**예시**:
```
현재: "컴포넌트 라이브러리 구축 중"
요청: "디자인 토큰 시스템도 만들면 좋겠어"
분석: 관련성 75%, 선행 조건 → 로드맵 확장 📈
```

**응답 패턴**:
```
📈 **훌륭한 제안입니다!**
이걸 지금 추가하면 현재 작업이 훨씬 더 완성도 높아질 거예요.
바로 통합해서 진행하겠습니다.
```

### 🌟 사이드 퀘스트 (투두리스트 추가)

**조건**:
- 현재 작업과 관련성 < 50%
- 좋은 아이디어지만 다른 방향
- 현재 로드맵에 영향 줄 수 있음

**예시**:
```
현재: "AI Workflow Playbook 개선 중"
요청: "블로그 시스템도 만들어볼까?"
분석: 관련성 20%, 새로운 방향 → 사이드 퀘스트 🌟
```

**응답 패턴**:
```
🌟 **좋은 아이디어네요!**
다만 지금 진행하면 현재 목표에서 벗어날 수 있어서,
투두리스트에 추가하고 현재 작업 완료 후 검토하는 게 어떨까요?

📋 투두리스트에 "블로그 시스템 검토" 추가 (우선순위: 중)
```

### 🚨 긴급 수정 (우선 처리)

**조건**:
- 버그, 보안, 중대한 오류
- 지금 안 하면 더 큰 문제
- 사용자 경험에 직접 영향

**예시**:
```
현재: "새 기능 개발 중"
요청: "기존 기능에서 보안 취약점 발견"
분석: 긴급도 100%, 위험도 높음 → 긴급 수정 🚨
```

**응답 패턴**:
```
🚨 **긴급 수정 필요!**
보안 문제는 즉시 해결해야 합니다.
현재 작업을 잠시 중단하고 이 문제부터 해결하겠습니다.
```

## 🔍 고급 분석 기법

### 의존성 그래프 분석
```yaml
현재_작업: "컴포넌트 라이브러리"
요청: "디자인 토큰 시스템"

의존성_분석:
  디자인_토큰 → 컴포넌트_라이브러리 ✅ (선행 조건)
  컴포넌트_라이브러리 → 스토리북 (후속 권장)
  
결론: "토큰부터 만들고 컴포넌트로 가는 게 맞네요!"
```

### 시너지 효과 계산
```python
def calculate_synergy(request, current_work):
    synergies = {
        "기술_스택_일치": 30,
        "사용자_경험_개선": 25, 
        "개발_효율_증대": 20,
        "재사용성_증가": 15,
        "문서화_완성도": 10
    }
    
    total_synergy = sum(synergies[key] for key in matched_synergies)
    return total_synergy
```

### 타이밍 최적화
```yaml
타이밍_분석:
  현재_진행률: 80%
  요청_복잡도: 중간
  완료_예상_시간: 2시간
  
최적_타이밍:
  - 지금: 시너지 효과 최대
  - 완료_후: 독립적 진행 가능
  - 나중에: 컨텍스트 스위칭 비용 발생
  
추천: "지금이 최적 타이밍입니다!"
```

## 📋 특수 케이스 처리

### 애매한 경계선 요청
```
요청: "사용자 인터페이스 개선"
문제: 너무 모호함

해결책:
1. 구체화 요청: "어떤 부분을 어떻게 개선하고 싶으신가요?"
2. 옵션 제시: "A방식(메인), B방식(확장), C방식(사이드)" 
3. 사용자 선택 기반으로 재분류
```

### 복합 요청 처리
```
요청: "블로그도 만들고 디자인 시스템도 개선해줘"
분해: 
  - "블로그 만들기" → 사이드 퀘스트 🌟
  - "디자인 시스템 개선" → 로드맵 확장 📈

응답:
"두 요청을 분석해봤는데,
디자인 시스템 개선은 지금 바로 하고,
블로그는 투두리스트에 추가하는 게 좋겠어요."
```

### 사용자 강력 요청
```
사용자: "아니야, 지금 바로 블로그 만들고 싶어!"
시스템: 🤔 **사용자 우선권 인정**

선택지 재제시:
1. ✅ 사용자 의견 존중 - 블로그 작업으로 전환
2. 💡 타협안 제시 - 빠른 블로그 프로토타입 후 복귀
3. 📊 영향도 설명 - 현재 진행률과 손실 명시

"최종 결정은 사용자님이 하세요. 어떻게 하실까요?"
```

## 🎯 성공 지표

### 효율성 측정
```yaml
로드맵_이탈_방지율: "> 90%" 
사용자_만족도: "> 85%"
프로젝트_완료율: "> 95%"
시간_절약: "> 30%"
```

### 지속적 개선
```yaml
피드백_수집:
  - 분류 정확도
  - 타이밍 적절성  
  - 제안 품질
  - 사용자 수용도

자동_학습:
  - 성공 패턴 학습
  - 실패 케이스 분석
  - 분류 기준 개선
```

이 가이드로 요청 분류 정확도가 크게 향상되어 로드맵 이탈을 효과적으로 방지할 수 있습니다! 🎯